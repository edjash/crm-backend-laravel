var Ge=Object.defineProperty,ze=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var De=(e,i,r)=>i in e?Ge(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r,o=(e,i)=>{for(var r in i||(i={}))ve.call(i,r)&&De(e,r,i[r]);if(Q)for(var r of Q(i))Ee.call(i,r)&&De(e,r,i[r]);return e},u=(e,i)=>ze(e,Be(i));var re=(e,i)=>{var r={};for(var n in e)ve.call(e,n)&&i.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Q)for(var n of Q(e))i.indexOf(n)<0&&Ee.call(e,n)&&(r[n]=e[n]);return r};import{a as qe,r as x,d as Ke,j as t,P as Qe,T as je,I as $,b as Ue,B as y,c as V,e as Xe,f as Ze,g as Ye,F as Je,L as et,C as tt,y as it,h as rt,i as j,D as nt,k as T,u as we,l as ne,m as se,n as oe,o as st,p as ae,R,A as ot,q as le,s as Ve,t as Ce,v as Se,w as F,x as ue,M as at,z as me,E as lt,G as ye,H as ut,J as mt,K as Pe,N as U,O as X,Q as dt,S as Z,U as ct,V as ft,W as Nt,X as ht,Y as xt,Z as bt,_ as pt,$ as gt,a0 as M,a1 as vt,a2 as de,a3 as ce,a4 as Y,a5 as Et,a6 as Dt,a7 as jt,a8 as wt,a9 as Vt,aa as Ct,ab as St,ac as yt,ad as Pt,ae as Tt,af as Ft}from"./vendor.72031de3.js";const Ot=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};Ot();const O={get:_t,post:Lt,put:kt,delete:At,request:W};function W(e,i,r,n){const s={method:e,url:i,baseURL:"http://edcrm-staging.local/api",headers:{Accept:"application/json"},data:{},params:{}};switch(e){case"POST":case"PUT":s.data=r;break;case"GET":default:s.params=r}const l=localStorage.getItem("token");return l&&n&&(s.headers.Authorization=`Bearer ${l}`,s.withCredentials=!0),qe.request(s).catch(It)}function It(e){return Promise.reject(e.response)}function _t(e,i,r=!0){return W("GET",e,i,r)}function Lt(e,i,r=!0){return W("POST",e,i,r)}function kt(e,i,r=!0){return W("PUT",e,i,r)}function At(e,i=!0){return W("DELETE",e,{},i)}var C="/var/www/edcrm/frontend/src/components/MainGrid/MainGrid.Toolbar.tsx";function $t(e){x.exports.useState("");const i=s=>{e.onSearch&&(r.cancel(),e.onSearch(s))},r=x.exports.useMemo(()=>Ke(i,1e3,{trailing:!0}),[]),n=s=>{const l=s.currentTarget.value;l?r(l):i("")};let a=t.exports.jsxDEV(t.exports.Fragment,{},void 0,!1);return(!e.loading||!e.searchChanged)&&e.pageCount>1&&(a=t.exports.jsxDEV(Qe,{count:e.pageCount,page:e.page,onChange:e.onPageChange,variant:"outlined",shape:"rounded"},void 0,!1,{fileName:C,lineNumber:51,columnNumber:13},this)),t.exports.jsxDEV(je,{style:{paddingLeft:0,paddingRight:0},sx:{display:"flex",justifyContent:"space-between"},children:[t.exports.jsxDEV($,{onClick:e.onCreateClick,size:"large",children:t.exports.jsxDEV(Ue,{fontSize:"inherit"},void 0,!1,{fileName:C,lineNumber:70,columnNumber:17},this)},void 0,!1,{fileName:C,lineNumber:69,columnNumber:13},this),t.exports.jsxDEV(y,{sx:{display:"inline"},children:t.exports.jsxDEV(V,{type:"search",placeholder:`Search ${e.title}`,onChange:n,InputProps:{startAdornment:t.exports.jsxDEV(Xe,{position:"start",children:t.exports.jsxDEV(Ze,{},void 0,!1,{fileName:C,lineNumber:80,columnNumber:33},this)},void 0,!1,{fileName:C,lineNumber:79,columnNumber:29},this)},fullWidth:!0,variant:"standard"},void 0,!1,{fileName:C,lineNumber:73,columnNumber:17},this)},void 0,!1,{fileName:C,lineNumber:72,columnNumber:13},this),t.exports.jsxDEV(y,{sx:{display:"flex",alignItems:"center"},children:[a,t.exports.jsxDEV($,{onClick:e.onRefreshClick,children:t.exports.jsxDEV(Ye,{},void 0,!1,{fileName:C,lineNumber:92,columnNumber:21},this)},void 0,!1,{fileName:C,lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:C,lineNumber:89,columnNumber:13},this)]},void 0,!0,{fileName:C,lineNumber:62,columnNumber:9},this)}var fe="/var/www/edcrm/frontend/src/components/MainGrid/MainGrid.LoadingOverlay.tsx";function Rt(e){return t.exports.jsxDEV(Je,{children:t.exports.jsxDEV("div",{style:{position:"absolute",top:0,width:"100%",height:"100%",background:"#111920",zIndex:1e3,opacity:"0.5"},children:t.exports.jsxDEV(et,{},void 0,!1,{fileName:fe,lineNumber:9,columnNumber:17},this)},void 0,!1,{fileName:fe,lineNumber:8,columnNumber:13},this)},void 0,!1,{fileName:fe,lineNumber:7,columnNumber:9},this)}var Te="/var/www/edcrm/frontend/src/components/MainGrid/MainGrid.InnerToolbar.tsx";function Mt(e){const i=tt(),[r]=it(i);if(!r.selection.length)return t.exports.jsxDEV(t.exports.Fragment,{},void 0,!1);const a="Delete Selected",s=()=>{e.onDelete(r.selection)};return t.exports.jsxDEV(rt,{children:t.exports.jsxDEV(j,{variant:"outlined",onClick:s,children:a},void 0,!1,{fileName:Te,lineNumber:32,columnNumber:13},this)},void 0,!1,{fileName:Te,lineNumber:31,columnNumber:9},this)}var J="/var/www/edcrm/frontend/src/components/MainGrid/MainGrid.Grid.tsx";const Ht=e=>t.exports.jsxDEV(T,{sx:{color:"primary.main"},children:e},we(),!1,{fileName:J,lineNumber:40,columnNumber:9},void 0);function Fe(e){const i=n=>{if(typeof n.value=="string"&&e.searchQuery.length){const a=new RegExp(e.searchQuery,"ig"),s=[];if(n.value.replace(a,function(l){return s.push(l),l}),s.length){const l=[],d=n.value.split(a);return d.map((c,D)=>{const f=c.split(" ");if(f.map((m,N)=>{if(l.push(m),N<f.length-1){const E=t.exports.jsxDEV(T,{children:"\xA0"},we(),!1,{fileName:J,lineNumber:72,columnNumber:43},this);l.push(E)}}),D<d.length-1){const m=s.shift();l.push(Ht(m!=null?m:""))}}),l}}return n.value},r=e.columns.map(n=>u(o({},n),{renderCell:i}));return t.exports.jsxDEV(t.exports.Fragment,{children:[t.exports.jsxDEV($t,{onSearch:e.onSearch,onCreateClick:e.onCreateClick,onRefreshClick:e.onRefreshClick,title:e.title,onPageChange:e.onPageChange,pageCount:e.pageCount,page:e.page,loading:e.loading,searchChanged:e.searchChanged},void 0,!1,{fileName:J,lineNumber:132,columnNumber:13},this),t.exports.jsxDEV(nt,{columns:r,rows:e.rows,loading:e.loading,pagination:!0,paginationMode:"server",className:"contactList",checkboxSelection:!0,disableSelectionOnClick:!0,disableColumnFilter:!0,disableColumnMenu:!0,hideFooter:!0,autoHeight:!0,rowHeight:44,disableColumnSelector:!0,components:{Toolbar:Mt,LoadingOverlay:Rt},componentsProps:{toolbar:{onDelete:e.onDelete}}},void 0,!1,{fileName:J,lineNumber:143,columnNumber:13},this)]},void 0,!0)}var L="/var/www/edcrm/frontend/src/components/ConfirmDialog.tsx";function Oe(e){var a,s,l;const i=(a=e.title)!=null?a:"Confirm",r=(s=e.confirmButtonText)!=null?s:"OK",n=(l=e.cancelButtonText)!=null?l:"Cancel";return t.exports.jsxDEV(ne,{open:e.open,onClose:e.onCancel,disableRestoreFocus:!0,children:[t.exports.jsxDEV(se,{id:"alert-dialog-title",children:i},void 0,!1,{fileName:L,lineNumber:25,columnNumber:7},this),t.exports.jsxDEV(oe,{children:t.exports.jsxDEV(st,{id:"alert-dialog-description",children:e.content},void 0,!1,{fileName:L,lineNumber:27,columnNumber:9},this)},void 0,!1,{fileName:L,lineNumber:26,columnNumber:7},this),t.exports.jsxDEV(ae,{children:[t.exports.jsxDEV(j,{onClick:e.onCancel,autoFocus:!0,children:n},void 0,!1,{fileName:L,lineNumber:32,columnNumber:9},this),t.exports.jsxDEV(j,{onClick:e.onConfirm,children:r},void 0,!1,{fileName:L,lineNumber:35,columnNumber:9},this)]},void 0,!0,{fileName:L,lineNumber:31,columnNumber:7},this)]},void 0,!0,{fileName:L,lineNumber:24,columnNumber:5},this)}var Wt="/var/www/edcrm/frontend/src/components/TextFieldEx.tsx";function w(e){return t.exports.jsxDEV(V,u(o({},e),{margin:"dense",className:"textFieldEx",InputLabelProps:{shrink:!0}}),void 0,!1,{fileName:Wt,lineNumber:5,columnNumber:9},this)}var ee="/var/www/edcrm/frontend/src/components/CountrySelect.tsx";function Ie(e){const[i,r]=R.useState(!1),[n,a]=R.useState([]),s=i&&n.length===0;return R.useEffect(()=>{!s||O.get("/countries",{}).then(l=>{const d=l.data;a(d)})},[s]),R.useEffect(()=>{i||a([])},[i]),t.exports.jsxDEV(ot,{className:"countrySelect",open:i,onOpen:()=>{r(!0)},onClose:()=>{r(!1)},isOptionEqualToValue:(l,d)=>l.name===d.name,getOptionLabel:l=>l.name,options:n,loading:s,onChange:e.onChange,renderInput:l=>t.exports.jsxDEV(w,u(o({},l),{name:e.name,label:"Country",InputProps:u(o({},l.InputProps),{endAdornment:t.exports.jsxDEV(R.Fragment,{children:[s?t.exports.jsxDEV(le,{color:"inherit",size:20},void 0,!1,{fileName:ee,lineNumber:65,columnNumber:44},this):null,l.InputProps.endAdornment]},void 0,!0,{fileName:ee,lineNumber:64,columnNumber:29},this)})}),void 0,!1,{fileName:ee,lineNumber:57,columnNumber:17},this)},void 0,!1,{fileName:ee,lineNumber:42,columnNumber:9},this)}var Ne="/var/www/edcrm/frontend/src/components/Overlay.tsx";function _e(e){return t.exports.jsxDEV(Ve,{open:e.open,children:[t.exports.jsxDEV(le,{color:"primary"},void 0,!1,{fileName:Ne,lineNumber:14,columnNumber:13},this),(e==null?void 0:e.message)&&t.exports.jsxDEV("div",{className:"message",children:e.message},void 0,!1,{fileName:Ne,lineNumber:16,columnNumber:17},this)]},void 0,!0,{fileName:Ne,lineNumber:13,columnNumber:9},this)}var he="/var/www/edcrm/frontend/src/components/Fieldset.tsx";function te(e){return t.exports.jsxDEV("fieldset",{style:{borderRadius:"6px"},children:[t.exports.jsxDEV("legend",{className:"",children:t.exports.jsxDEV("span",{children:e.label},void 0,!1,{fileName:he,lineNumber:12,columnNumber:34},this)},void 0,!1,{fileName:he,lineNumber:12,columnNumber:13},this),e.children]},void 0,!0,{fileName:he,lineNumber:11,columnNumber:9},this)}var b="/var/www/edcrm/frontend/src/components/Contacts/Contacts.CreateEdit.tsx";function Gt(e){const i="New Contact",[r,n]=x.exports.useState({loading:!1,fieldValues:{}}),a=d=>{d.preventDefault(),n(u(o({},r),{loading:!0})),O.post("/contacts",o({},r.fieldValues)).then(c=>{n(u(o({},r),{loading:!1})),c.statusText==="OK"&&(e.onSave(),PubSub.publish("CONTACTS.REFRESH"),PubSub.publish("TOAST.SHOW",{message:"Contact Added",autoHide:!0}))}).catch(c=>{n(u(o({},r),{loading:!1}))})},s=d=>{n(u(o({},r),{fieldValues:u(o({},r.fieldValues),{[d.target.name]:d.target.value})}))},l=(d,c)=>{n(u(o({},r),{fieldValues:u(o({},r.fieldValues),{country_code:c===null?"":c.code})}))};return t.exports.jsxDEV(ne,{open:e.open,onClose:e.onClose,maxWidth:"lg",children:[t.exports.jsxDEV(se,{sx:{display:"flex",justifyContent:"space-between"},children:[i,t.exports.jsxDEV($,{"aria-label":"close",onClick:e.onCancel,className:"closeButton",children:t.exports.jsxDEV(Ce,{},void 0,!1,{fileName:b,lineNumber:90,columnNumber:21},this)},void 0,!1,{fileName:b,lineNumber:89,columnNumber:17},this)]},void 0,!0,{fileName:b,lineNumber:87,columnNumber:13},this),t.exports.jsxDEV("form",{onSubmit:a,children:[t.exports.jsxDEV(oe,{dividers:!0,sx:{display:"grid",gap:1,gridTemplateColumns:"2"},children:[t.exports.jsxDEV(te,{label:"Name",children:t.exports.jsxDEV(y,{sx:{display:"grid",gap:1,gridTemplateColumns:"repeat(2, 1fr)"},children:[t.exports.jsxDEV(w,{name:"firstname",label:"First Name",onChange:s},void 0,!1,{fileName:b,lineNumber:102,columnNumber:29},this),t.exports.jsxDEV(w,{name:"lastname",label:"Last Name",onChange:s},void 0,!1,{fileName:b,lineNumber:103,columnNumber:29},this)]},void 0,!0,{fileName:b,lineNumber:101,columnNumber:25},this)},void 0,!1,{fileName:b,lineNumber:100,columnNumber:21},this),t.exports.jsxDEV(te,{label:"Address",children:t.exports.jsxDEV(y,{sx:{display:"grid"},children:[t.exports.jsxDEV(w,{name:"street",label:"Street",onChange:s},void 0,!1,{fileName:b,lineNumber:108,columnNumber:29},this),t.exports.jsxDEV(w,{name:"town",label:"Town / City",onChange:s},void 0,!1,{fileName:b,lineNumber:109,columnNumber:29},this),t.exports.jsxDEV(w,{name:"county",label:"County / State",onChange:s},void 0,!1,{fileName:b,lineNumber:110,columnNumber:29},this),t.exports.jsxDEV(w,{name:"postcode",label:"Zip / Postal Code",onChange:s},void 0,!1,{fileName:b,lineNumber:111,columnNumber:29},this),t.exports.jsxDEV(Ie,{name:"country_code",onChange:l},void 0,!1,{fileName:b,lineNumber:112,columnNumber:29},this)]},void 0,!0,{fileName:b,lineNumber:107,columnNumber:25},this)},void 0,!1,{fileName:b,lineNumber:106,columnNumber:21},this)]},void 0,!0,{fileName:b,lineNumber:94,columnNumber:17},this),t.exports.jsxDEV(ae,{children:[t.exports.jsxDEV(j,{size:"small",variant:"contained",onClick:e.onCancel,children:"Cancel"},void 0,!1,{fileName:b,lineNumber:117,columnNumber:21},this),t.exports.jsxDEV(j,{size:"small",variant:"contained",type:"submit",disableElevation:!0,autoFocus:!0,children:"Save"},void 0,!1,{fileName:b,lineNumber:120,columnNumber:21},this)]},void 0,!0,{fileName:b,lineNumber:116,columnNumber:17},this)]},void 0,!0,{fileName:b,lineNumber:93,columnNumber:13},this),t.exports.jsxDEV(_e,{open:r.loading},void 0,!1,{fileName:b,lineNumber:125,columnNumber:13},this)]},void 0,!0,{fileName:b,lineNumber:82,columnNumber:9},this)}var G="/var/www/edcrm/frontend/src/components/Contacts/Contacts.tsx";function zt(){const{showModal:e}=Se(),[i,r]=x.exports.useState({title:"Contacts",searchQuery:"",searchChanged:!1,rows:[],columns:[],loading:!1,deleteIds:[],page:1,rowCount:10,pageSize:10,pageCount:10}),n=f=>{const m=[t.exports.jsxDEV("span",{children:["The following Contacts will be deleted:",t.exports.jsxDEV("br",{},void 0,!1,{fileName:G,lineNumber:34,columnNumber:9},this)]},"0",!0,{fileName:G,lineNumber:32,columnNumber:7},this)],N=[];for(const h of i.rows)f.indexOf(h.id)>-1&&(N.push(h.id),m.push(t.exports.jsxDEV("span",{children:[t.exports.jsxDEV("br",{},void 0,!1,{fileName:G,lineNumber:44,columnNumber:13},this),h.firstname+" "+h.lastname]},h.id,!0,{fileName:G,lineNumber:43,columnNumber:11},this)));const E=e(Oe,{title:"Confirm Delete",content:m,onCancel:()=>{E.hide()},onConfirm:()=>{E.hide(),r(u(o({},i),{deleteIds:N,loading:!0}))}})},a=()=>{let f="GET",m="/contacts";i.deleteIds.length&&(m+="/"+i.deleteIds.join(","),f="DELETE"),O.request(f,m,{sortBy:"id",sortDirection:"desc",limit:i.pageSize,search:i.searchQuery,page:i.page},!0).then(N=>{if(N.data.last_page<N.data.current_page){r(u(o({},i),{deleteIds:[],page:N.data.last_page}));return}r(u(o({},i),{page:N.data.current_page,rowCount:N.data.total,rows:N.data.data,pageCount:Math.ceil(N.data.total/i.pageSize),loading:!1,deleteIds:[],searchChanged:!1}))}).catch(N=>{r(u(o({},i),{deleteIds:[],loading:!1}))})},s=f=>{r(u(o({},i),{searchQuery:f,searchChanged:!0,page:1,loading:!0}))},l=(f,m)=>{m!=i.page&&r(u(o({},i),{page:m,loading:!0}))},d=()=>{const f=e(Gt,{type:"new",onCancel:()=>{f.hide()},onSave:()=>{f.destroy()}})},c=()=>{r(u(o({},i),{loading:!0})),F.publish("TOAST.SHOW",{message:"Refreshed"})};x.exports.useEffect(()=>{i.loading&&a()},[i.loading]),x.exports.useEffect(()=>(F.subscribe("CONTACTS.REFRESH",c),r(u(o({},i),{loading:!0})),()=>{F.unsubscribe("CONTACTS")}),[]);const D=[{field:"firstname",headerName:"First name",width:250},{field:"lastname",headerName:"Last name",width:250},{field:"address",headerName:"Address",width:410,valueGetter:f=>{const m=f.row.address[0];return m?[m.street,m.town,m.county,m.postcode,m.country_name].filter(E=>E).join(", "):""}}];return t.exports.jsxDEV(Fe,u(o({},i),{columns:D,onSearch:s,onCreateClick:d,onRefreshClick:c,onPageChange:l,onDelete:n}),void 0,!1,{fileName:G,lineNumber:210,columnNumber:5},this)}var g="/var/www/edcrm/frontend/src/components/Companies/Companies.CreateEdit.tsx";function Bt(e){const i="New Company",[r,n]=x.exports.useState({loading:!1,fieldValues:{}}),a=d=>{d.preventDefault(),n(u(o({},r),{loading:!0})),O.post("/companies",o({},r.fieldValues)).then(c=>{n(u(o({},r),{loading:!1})),c.statusText==="OK"&&(e.onSave(),PubSub.publish("COMPANIES.REFRESH"),PubSub.publish("TOAST.SHOW",{message:"Company Added",autoHide:!0}))}).catch(c=>{n(u(o({},r),{loading:!1}))})},s=d=>{n(u(o({},r),{fieldValues:u(o({},r.fieldValues),{[d.target.name]:d.target.value})}))},l=(d,c)=>{n(u(o({},r),{fieldValues:u(o({},r.fieldValues),{country_code:c===null?"":c.code})}))};return t.exports.jsxDEV(ne,{open:e.open,onClose:e.onClose,maxWidth:"xs",fullWidth:!0,children:[t.exports.jsxDEV(se,{sx:{display:"flex",justifyContent:"space-between"},children:[i,t.exports.jsxDEV($,{"aria-label":"close",onClick:e.onCancel,className:"closeButton",children:t.exports.jsxDEV(Ce,{},void 0,!1,{fileName:g,lineNumber:91,columnNumber:21},this)},void 0,!1,{fileName:g,lineNumber:90,columnNumber:17},this)]},void 0,!0,{fileName:g,lineNumber:88,columnNumber:13},this),t.exports.jsxDEV("form",{onSubmit:a,children:[t.exports.jsxDEV(oe,{dividers:!0,sx:{display:"flex",flexDirection:"column"},children:[t.exports.jsxDEV(te,{label:"Name",children:t.exports.jsxDEV(w,{fullWidth:!0,name:"name",label:"Company Name",onChange:s},void 0,!1,{fileName:g,lineNumber:101,columnNumber:25},this)},void 0,!1,{fileName:g,lineNumber:100,columnNumber:21},this),t.exports.jsxDEV(te,{label:"Address",children:t.exports.jsxDEV(y,{sx:{display:"grid"},children:[t.exports.jsxDEV(w,{name:"street",label:"Street",onChange:s},void 0,!1,{fileName:g,lineNumber:105,columnNumber:29},this),t.exports.jsxDEV(w,{name:"town",label:"Town / City",onChange:s},void 0,!1,{fileName:g,lineNumber:106,columnNumber:29},this),t.exports.jsxDEV(w,{name:"county",label:"County / State",onChange:s},void 0,!1,{fileName:g,lineNumber:107,columnNumber:29},this),t.exports.jsxDEV(w,{name:"postcode",label:"Zip / Postal Code",onChange:s},void 0,!1,{fileName:g,lineNumber:108,columnNumber:29},this),t.exports.jsxDEV(Ie,{name:"country_code",onChange:l},void 0,!1,{fileName:g,lineNumber:109,columnNumber:29},this)]},void 0,!0,{fileName:g,lineNumber:104,columnNumber:25},this)},void 0,!1,{fileName:g,lineNumber:103,columnNumber:21},this)]},void 0,!0,{fileName:g,lineNumber:95,columnNumber:17},this),t.exports.jsxDEV(ae,{children:[t.exports.jsxDEV(j,{size:"small",variant:"contained",onClick:e.onCancel,children:"Cancel"},void 0,!1,{fileName:g,lineNumber:114,columnNumber:21},this),t.exports.jsxDEV(j,{size:"small",variant:"contained",type:"submit",autoFocus:!0,children:"Save"},void 0,!1,{fileName:g,lineNumber:117,columnNumber:21},this)]},void 0,!0,{fileName:g,lineNumber:113,columnNumber:17},this)]},void 0,!0,{fileName:g,lineNumber:94,columnNumber:13},this),t.exports.jsxDEV(_e,{open:r.loading},void 0,!1,{fileName:g,lineNumber:122,columnNumber:13},this)]},void 0,!0,{fileName:g,lineNumber:82,columnNumber:9},this)}var z="/var/www/edcrm/frontend/src/components/Companies/Companies.tsx";function qt(){const{showModal:e}=Se(),[i,r]=x.exports.useState({title:"Companies",searchQuery:"",searchChanged:!1,rows:[],columns:[],loading:!1,deleteIds:[],page:1,rowCount:10,pageSize:10,pageCount:10}),n=f=>{const m=[t.exports.jsxDEV("span",{children:["The following Companies will be deleted:",t.exports.jsxDEV("br",{},void 0,!1,{fileName:z,lineNumber:34,columnNumber:17},this)]},"0",!0,{fileName:z,lineNumber:32,columnNumber:13},this)],N=[];for(const h of i.rows)f.indexOf(h.id)>-1&&(N.push(h.id),m.push(t.exports.jsxDEV("span",{children:[t.exports.jsxDEV("br",{},void 0,!1,{fileName:z,lineNumber:44,columnNumber:25},this),h.name]},h.id,!0,{fileName:z,lineNumber:43,columnNumber:21},this)));const E=e(Oe,{title:"Confirm Delete",content:m,onCancel:()=>{E.hide()},onConfirm:()=>{E.hide(),r(u(o({},i),{deleteIds:N,loading:!0}))}})},a=()=>{let f="GET",m="/companies";i.deleteIds.length&&(m+="/"+i.deleteIds.join(","),f="DELETE"),O.request(f,m,{sortBy:"id",sortDirection:"desc",limit:i.pageSize,search:i.searchQuery,page:i.page},!0).then(N=>{if(N.data.last_page<N.data.current_page){r(u(o({},i),{deleteIds:[],page:N.data.last_page}));return}r(u(o({},i),{page:N.data.current_page,rowCount:N.data.total,rows:N.data.data,pageCount:Math.ceil(N.data.total/i.pageSize),loading:!1,deleteIds:[],searchChanged:!1}))}).catch(N=>{r(u(o({},i),{deleteIds:[],loading:!1}))})},s=f=>{r(u(o({},i),{searchQuery:f,searchChanged:!0,page:1,loading:!0}))},l=(f,m)=>{m!=i.page&&r(u(o({},i),{page:m,loading:!0}))},d=()=>{const f=e(Bt,{type:"new",onCancel:()=>{f.hide()},onSave:()=>{f.destroy()}})},c=()=>{r(u(o({},i),{loading:!0})),F.publish("TOAST.SHOW",{message:"Refreshed"})};x.exports.useEffect(()=>{i.loading&&a()},[i.loading]),x.exports.useEffect(()=>(F.subscribe("COMPANIES.REFRESH",c),r(u(o({},i),{loading:!0})),()=>{F.unsubscribe("COMPANIES")}),[]);const D=[{field:"name",headerName:"Name",width:250},{field:"address",headerName:"Address",width:410,headerClassName:"no-header",valueGetter:f=>{const m=f.row.address[0];return m?[m.steet,m.town,m.county,m.postcode,m.country_name].filter(E=>E).join(", "):""}}];return t.exports.jsxDEV(Fe,u(o({},i),{columns:D,onSearch:s,onCreateClick:d,onRefreshClick:c,onPageChange:l,onDelete:n}),void 0,!1,{fileName:z,lineNumber:207,columnNumber:9},this)}const Le=x.exports.createContext({}),Kt=Le.Provider,xe=()=>x.exports.useContext(Le);var v="/var/www/edcrm/frontend/src/components/TopBar.tsx";const ie=240,Qt=ue(at,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:i})=>o({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},i&&{marginLeft:ie,width:`calc(100% - ${ie}px)`,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}));function Ut(e){const i=xe(),r=me.usePopupState({variant:"popover",popupId:"accountMenu"}),n=()=>{r.close(),i.setLoginStatus(!1,"")};return t.exports.jsxDEV(Qt,{position:"fixed",elevation:1,children:t.exports.jsxDEV(je,{children:[t.exports.jsxDEV($,{color:"inherit","aria-label":"open drawer",onClick:e.onNavBurgerClick,edge:"start",children:t.exports.jsxDEV(lt,{},void 0,!1,{fileName:v,lineNumber:74,columnNumber:11},this)},void 0,!1,{fileName:v,lineNumber:68,columnNumber:9},this),t.exports.jsxDEV(ye,{variant:"h5",sx:{flexGrow:1},children:"Ed CRM"},void 0,!1,{fileName:v,lineNumber:76,columnNumber:9},this),t.exports.jsxDEV("span",{className:"spacer"},void 0,!1,{fileName:v,lineNumber:79,columnNumber:9},this),t.exports.jsxDEV("div",{children:[t.exports.jsxDEV($,u(o({},me.bindTrigger(r)),{children:t.exports.jsxDEV(ut,{},void 0,!1,{fileName:v,lineNumber:82,columnNumber:13},this)}),void 0,!1,{fileName:v,lineNumber:81,columnNumber:11},this),t.exports.jsxDEV(mt,u(o({},me.bindPopover(r)),{anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:t.exports.jsxDEV(Pe,{dense:!0,className:"menuList",children:[t.exports.jsxDEV(U,{button:!0,onClick:n,children:[t.exports.jsxDEV(X,{children:t.exports.jsxDEV(dt,{fontSize:"small"},void 0,!1,{fileName:v,lineNumber:91,columnNumber:31},this)},void 0,!1,{fileName:v,lineNumber:91,columnNumber:17},this),t.exports.jsxDEV(Z,{primary:"Logout"},void 0,!1,{fileName:v,lineNumber:92,columnNumber:17},this)]},void 0,!0,{fileName:v,lineNumber:90,columnNumber:15},this),t.exports.jsxDEV(U,{button:!0,onClick:r.close,children:[t.exports.jsxDEV(X,{children:t.exports.jsxDEV(ct,{fontSize:"small"},void 0,!1,{fileName:v,lineNumber:95,columnNumber:31},this)},void 0,!1,{fileName:v,lineNumber:95,columnNumber:17},this),t.exports.jsxDEV(Z,{primary:"My Account"},void 0,!1,{fileName:v,lineNumber:96,columnNumber:17},this)]},void 0,!0,{fileName:v,lineNumber:94,columnNumber:15},this)]},void 0,!0,{fileName:v,lineNumber:89,columnNumber:13},this)}),void 0,!1,{fileName:v,lineNumber:84,columnNumber:11},this)]},void 0,!0,{fileName:v,lineNumber:80,columnNumber:9},this)]},void 0,!0,{fileName:v,lineNumber:67,columnNumber:7},this)},void 0,!1,{fileName:v,lineNumber:66,columnNumber:5},this)}var p="/var/www/edcrm/frontend/src/routes/Home/Home.tsx";const ke=e=>({width:ie,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),Ae=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(9)} + 1px)`}}),Xt=ue(ft,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:i})=>o(o({width:ie,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box"},i&&u(o({},ke(e)),{"& .MuiDrawer-paper":ke(e)})),!i&&u(o({},Ae(e)),{"& .MuiDrawer-paper":Ae(e)}))),$e=ue("div")(({theme:e})=>o({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar));function Re(e){const l=e,{children:i,value:r,ident:n}=l,a=re(l,["children","value","ident"]);let s={zIndex:2,paddingLeft:"10px"};return r!==n&&(s={position:"absolute",top:0,left:-9e3,zIndex:1,visibility:"hidden"}),t.exports.jsxDEV(y,u(o({sx:o({},s),role:"tabpanel",id:`nav-tabpanel-${n}`,"aria-labelledby":`nav-tab-${n}`},a),{children:i}),void 0,!1,{fileName:p,lineNumber:90,columnNumber:9},this)}function Zt(){Nt();const[e,i]=x.exports.useState({navOpen:!0,selected:"contacts"}),r=()=>{i(u(o({},e),{navOpen:!e.navOpen}))},n=a=>{console.log(a),i(u(o({},e),{selected:a}))};return t.exports.jsxDEV(y,{sx:{display:"flex",width:"100%"},children:[t.exports.jsxDEV(Ut,{navOpen:e.navOpen,onNavBurgerClick:r},void 0,!1,{fileName:p,lineNumber:126,columnNumber:13},this),t.exports.jsxDEV(Xt,{variant:"permanent",open:e.navOpen,PaperProps:{elevation:1},children:[t.exports.jsxDEV($e,{},void 0,!1,{fileName:p,lineNumber:128,columnNumber:17},this),t.exports.jsxDEV(Pe,{children:[t.exports.jsxDEV(U,{button:!0,onClick:()=>{n("contacts")},selected:e.selected==="contacts",children:[t.exports.jsxDEV(X,{children:t.exports.jsxDEV(ht,{},void 0,!1,{fileName:p,lineNumber:134,columnNumber:39},this)},void 0,!1,{fileName:p,lineNumber:134,columnNumber:25},this),t.exports.jsxDEV(Z,{primary:"Contacts"},void 0,!1,{fileName:p,lineNumber:135,columnNumber:25},this)]},"contacts",!0,{fileName:p,lineNumber:130,columnNumber:21},this),t.exports.jsxDEV(U,{button:!0,onClick:()=>{n("companies")},selected:e.selected==="companies",children:[t.exports.jsxDEV(X,{children:t.exports.jsxDEV(xt,{},void 0,!1,{fileName:p,lineNumber:141,columnNumber:39},this)},void 0,!1,{fileName:p,lineNumber:141,columnNumber:25},this),t.exports.jsxDEV(Z,{primary:"Companies"},void 0,!1,{fileName:p,lineNumber:142,columnNumber:25},this)]},"companies",!0,{fileName:p,lineNumber:137,columnNumber:21},this)]},void 0,!0,{fileName:p,lineNumber:129,columnNumber:17},this)]},void 0,!0,{fileName:p,lineNumber:127,columnNumber:13},this),t.exports.jsxDEV(y,{component:"main",sx:{flexGrow:1,position:"relative"},children:[t.exports.jsxDEV($e,{},void 0,!1,{fileName:p,lineNumber:147,columnNumber:17},this),t.exports.jsxDEV(Re,{value:e.selected,ident:"contacts",children:t.exports.jsxDEV(zt,{},void 0,!1,{fileName:p,lineNumber:149,columnNumber:21},this)},void 0,!1,{fileName:p,lineNumber:148,columnNumber:17},this),t.exports.jsxDEV(Re,{value:e.selected,ident:"companies",children:t.exports.jsxDEV(qt,{},void 0,!1,{fileName:p,lineNumber:152,columnNumber:21},this)},void 0,!1,{fileName:p,lineNumber:151,columnNumber:17},this)]},void 0,!0,{fileName:p,lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:p,lineNumber:125,columnNumber:9},this)}const Me=(e=[])=>{let i="";e.length>1&&!i&&(i="The following errors were encountered:"),e.length===1&&!i&&(i=e[0],e=[]),PubSub.publish("TOAST.SHOW",{autoHide:!1,message:i,list:e,type:"error"})},be=e=>{var n,a;const i=(a=(n=e==null?void 0:e.data)==null?void 0:n.errors)!=null?a:{};let r=[];for(let s in i)r=r.concat(i[s]);if(!r.length){const s=e==null?void 0:e.status;if(console.log(`${s} errorResponse`,e),s)return;r.push("A connection error occured, Please try again later.")}Me(r)};var I="/var/www/edcrm/frontend/src/components/AuthPage.tsx";function pe(e){return t.exports.jsxDEV(bt,{sx:{display:"flex",height:"100vh",width:"100%",justifyContent:"center",alignItems:"center"},children:[t.exports.jsxDEV(y,{sx:{mt:-20,width:500},children:[t.exports.jsxDEV(y,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",mb:3},children:[t.exports.jsxDEV(pt,{children:t.exports.jsxDEV(gt,{},void 0,!1,{fileName:I,lineNumber:21,columnNumber:13},this)},void 0,!1,{fileName:I,lineNumber:20,columnNumber:11},this),t.exports.jsxDEV(ye,{component:"h1",variant:"h5",children:e.title},void 0,!1,{fileName:I,lineNumber:23,columnNumber:11},this)]},void 0,!0,{fileName:I,lineNumber:19,columnNumber:9},this),e.children]},void 0,!0,{fileName:I,lineNumber:18,columnNumber:7},this),t.exports.jsxDEV(Ve,{className:"backdrop",open:e.isLoading,children:t.exports.jsxDEV(le,{color:"inherit"},void 0,!1,{fileName:I,lineNumber:30,columnNumber:9},this)},void 0,!1,{fileName:I,lineNumber:29,columnNumber:7},this)]},void 0,!0,{fileName:I,lineNumber:17,columnNumber:5},this)}var B="/var/www/edcrm/frontend/src/routes/ForgotPassword/ForgotPassword.Step1.tsx";const Yt="Forgot Password";function Jt(e){return t.exports.jsxDEV("form",{onSubmit:e.onSubmit,children:t.exports.jsxDEV(T,{sx:{display:"grid",rowGap:1},children:[t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:e.onChange},void 0,!1,{fileName:B,lineNumber:18,columnNumber:9},this),t.exports.jsxDEV(j,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Send Password Reset Email"},void 0,!1,{fileName:B,lineNumber:29,columnNumber:9},this),t.exports.jsxDEV(M,{href:"/login",variant:"body2",children:"Return to Login"},void 0,!1,{fileName:B,lineNumber:32,columnNumber:9},this)]},void 0,!0,{fileName:B,lineNumber:17,columnNumber:7},this)},void 0,!1,{fileName:B,lineNumber:16,columnNumber:5},this)}var _="/var/www/edcrm/frontend/src/routes/ForgotPassword/ForgotPassword.Step2.tsx";const ei="Enter Code";function ti(e){return t.exports.jsxDEV("form",{className:"enterCode",onSubmit:e.onSubmit,children:t.exports.jsxDEV(T,{sx:{display:"grid",rowGap:1},children:[t.exports.jsxDEV(vt,{elevation:6,children:[t.exports.jsxDEV("p",{children:"If your email address exists in our system, you'll receive an email with a code to reset your password."},void 0,!1,{fileName:_,lineNumber:21,columnNumber:11},this),t.exports.jsxDEV("p",{children:"Please enter the code you receive below:"},void 0,!1,{fileName:_,lineNumber:25,columnNumber:11},this),t.exports.jsxDEV(V,{variant:"filled",required:!0,id:"code",label:"Enter Code",name:"code",autoFocus:!0,onChange:e.onChange},void 0,!1,{fileName:_,lineNumber:26,columnNumber:11},this)]},void 0,!0,{fileName:_,lineNumber:20,columnNumber:9},this),t.exports.jsxDEV(j,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Submit"},void 0,!1,{fileName:_,lineNumber:36,columnNumber:9},this),t.exports.jsxDEV(M,{href:"/login",variant:"body2",children:"Return to Login"},void 0,!1,{fileName:_,lineNumber:39,columnNumber:9},this)]},void 0,!0,{fileName:_,lineNumber:19,columnNumber:7},this)},void 0,!1,{fileName:_,lineNumber:18,columnNumber:5},this)}var H="/var/www/edcrm/frontend/src/routes/ForgotPassword/ForgotPassword.Step3.tsx";const ii="New Password";function ri(e){return t.exports.jsxDEV("form",{onSubmit:e.onSubmit,children:t.exports.jsxDEV(T,{sx:{display:"grid",rowGap:1},children:[t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.onChange},void 0,!1,{fileName:H,lineNumber:18,columnNumber:9},this),t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"",onChange:e.onChange},void 0,!1,{fileName:H,lineNumber:29,columnNumber:9},this),t.exports.jsxDEV(j,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Submit Password"},void 0,!1,{fileName:H,lineNumber:40,columnNumber:9},this),t.exports.jsxDEV(M,{href:"/login",variant:"body2",children:"Return to Login"},void 0,!1,{fileName:H,lineNumber:43,columnNumber:9},this)]},void 0,!0,{fileName:H,lineNumber:17,columnNumber:7},this)},void 0,!1,{fileName:H,lineNumber:16,columnNumber:5},this)}var q="/var/www/edcrm/frontend/src/routes/ForgotPassword/ForgotPassword.tsx";function ni(){const e=de(),[i,r]=x.exports.useState({isLoading:!1,currentStep:1,fieldValues:{}}),n=d=>{r(u(o({},i),{fieldValues:u(o({},i.fieldValues),{[d.target.name]:d.target.value.trim()})}))},a=d=>{if(d.preventDefault(),localStorage.removeItem("token"),i.currentStep===3&&i.fieldValues.password!==i.fieldValues.confirmPassword)return Me(["Passwords don't match."]);r(u(o({},i),{isLoading:!0})),O.post("/forgot-password",u(o({},i.fieldValues),{step:i.currentStep}),!1).then(c=>{if(r(u(o({},i),{isLoading:!1})),c.statusText==="OK"){if(i.currentStep===3){e.push("/"),PubSub.publish("TOAST.SHOW",{type:"info",autoHide:!0,message:"Your password is now changed, please login."});return}r(u(o({},i),{currentStep:i.currentStep+1,fieldValues:o(o({},i.fieldValues),c.data.fieldValues)}))}}).catch(c=>{var D;r(u(o({},i),{isLoading:!1})),be(c),((D=c==null?void 0:c.data)==null?void 0:D.errorType)=="code_sent"&&alert("OK")})};x.exports.useEffect(()=>{i.currentStep===3&&PubSub.publish("TOAST.SHOW",{type:"info",message:"Code accepted, please enter a new password.",autoHide:!0})},[i.currentStep]);let s,l="";switch(i.currentStep){case 1:default:l=Yt,s=t.exports.jsxDEV(Jt,{onChange:n,onSubmit:a},void 0,!1,{fileName:q,lineNumber:121,columnNumber:14},this);break;case 2:l=ei,s=t.exports.jsxDEV(ti,{onChange:n,onSubmit:a},void 0,!1,{fileName:q,lineNumber:125,columnNumber:14},this);break;case 3:l=ii,s=t.exports.jsxDEV(ri,{onChange:n,onSubmit:a},void 0,!1,{fileName:q,lineNumber:129,columnNumber:14},this);break}return t.exports.jsxDEV(pe,{title:l,isLoading:i.isLoading,children:t.exports.jsxDEV(T,{sx:{display:"grid",rowGap:1},children:s},void 0,!1,{fileName:q,lineNumber:135,columnNumber:7},this)},void 0,!1,{fileName:q,lineNumber:134,columnNumber:5},this)}var P="/var/www/edcrm/frontend/src/routes/Login/Login.Form.tsx";function si(e){return t.exports.jsxDEV("form",{onSubmit:e.onSubmit,children:t.exports.jsxDEV(T,{sx:{display:"grid",rowGap:1},children:[t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:e.onChange},void 0,!1,{fileName:P,lineNumber:17,columnNumber:9},this),t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.onChange},void 0,!1,{fileName:P,lineNumber:28,columnNumber:9},this),t.exports.jsxDEV(j,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign In"},void 0,!1,{fileName:P,lineNumber:39,columnNumber:9},this),t.exports.jsxDEV(ce,{container:!0,children:[t.exports.jsxDEV(ce,{item:!0,xs:!0,children:t.exports.jsxDEV(M,{href:"/forgot-password",variant:"body2",children:"Forgot password?"},void 0,!1,{fileName:P,lineNumber:44,columnNumber:13},this)},void 0,!1,{fileName:P,lineNumber:43,columnNumber:11},this),t.exports.jsxDEV(ce,{item:!0,children:t.exports.jsxDEV(M,{href:"/register",variant:"body2",children:"Don't have an account? Sign Up!"},void 0,!1,{fileName:P,lineNumber:49,columnNumber:13},this)},void 0,!1,{fileName:P,lineNumber:48,columnNumber:11},this)]},void 0,!0,{fileName:P,lineNumber:42,columnNumber:9},this)]},void 0,!0,{fileName:P,lineNumber:16,columnNumber:7},this)},void 0,!1,{fileName:P,lineNumber:15,columnNumber:5},this)}var He="/var/www/edcrm/frontend/src/routes/Login/Login.tsx";function oi(){const e=xe(),i=de(),[r,n]=x.exports.useState({fieldValues:{},isLoading:!1}),a=l=>{n(u(o({},r),{fieldValues:u(o({},r.fieldValues),{[l.target.name]:l.target.value.trim()})}))},s=l=>{l.preventDefault(),localStorage.removeItem("token"),n(u(o({},r),{isLoading:!0})),O.post("/login",o({},r.fieldValues),!1).then(d=>{n(u(o({},r),{isLoading:!1})),d.statusText==="OK"&&(e.setLoginStatus(!0,d.data.access_token),PubSub.publish("TOAST.SHOW",{message:"Successfully Logged In",autoHide:!0}),i.push("/"))}).catch(d=>{n(u(o({},r),{isLoading:!1})),be(d)})};return t.exports.jsxDEV(pe,{title:"Sign In",isLoading:r.isLoading,children:t.exports.jsxDEV(si,{onChange:a,onSubmit:s},void 0,!1,{fileName:He,lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:He,lineNumber:60,columnNumber:5},this)}var k="/var/www/edcrm/frontend/src/routes/Register/Register.Form.tsx";function ai(e){return t.exports.jsxDEV("form",{onSubmit:e.onSubmit,children:t.exports.jsxDEV(T,{sx:{display:"grid",rowGap:1},children:[t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",type:"email",autoComplete:"email",onChange:e.onChange},void 0,!1,{fileName:k,lineNumber:16,columnNumber:9},this),t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:e.onChange},void 0,!1,{fileName:k,lineNumber:27,columnNumber:9},this),t.exports.jsxDEV(V,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"",onChange:e.onChange},void 0,!1,{fileName:k,lineNumber:38,columnNumber:9},this),t.exports.jsxDEV(j,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",children:"Sign Up"},void 0,!1,{fileName:k,lineNumber:49,columnNumber:9},this),t.exports.jsxDEV(M,{href:"/login",variant:"body2",children:"Already have an account? Sign in"},void 0,!1,{fileName:k,lineNumber:52,columnNumber:9},this)]},void 0,!0,{fileName:k,lineNumber:15,columnNumber:7},this)},void 0,!1,{fileName:k,lineNumber:14,columnNumber:5},this)}var We="/var/www/edcrm/frontend/src/routes/Register/Register.tsx";function li(){const e=xe(),i=de(),[r,n]=x.exports.useState(""),[a,s]=x.exports.useState(""),[l,d]=x.exports.useState(""),[c,D]=x.exports.useState(!1),f=(h,A)=>{PubSub.publish("TOAST.SHOW",{message:h,list:A,type:"error"})},m=h=>{switch(h.target.name){case"email":n(h.target.value);break;case"password":s(h.target.value);break;case"confirmPassword":d(h.target.value);break}},N=h=>{h.preventDefault(),!!E()&&(D(!0),localStorage.removeItem("token"),O.post("/register",{email:r,password:a,password_confirmation:l},!1).then(A=>{D(!1),A.statusText==="OK"&&(e.setLoginStatus(!0,A.data.access_token),i.push("/"))}).catch(A=>{D(!1),be(A)}))},E=()=>{const h=[];return a&&a.length<5&&h.push("Password must contain at least 5 characters."),l&&l!==a&&h.push("Passwords don't match."),h.length?(f("Please correct the following:",h),!1):!0};return t.exports.jsxDEV(pe,{title:"Register",isLoading:c,children:t.exports.jsxDEV(ai,{onSubmit:N,onChange:m},void 0,!1,{fileName:We,lineNumber:93,columnNumber:7},this)},void 0,!1,{fileName:We,lineNumber:92,columnNumber:5},this)}var ge="/var/www/edcrm/frontend/src/components/PrivateRoute.tsx";const ui=e=>{const a=e,{component:i,loggedIn:r}=a,n=re(a,["component","loggedIn"]);return t.exports.jsxDEV(Y,u(o({},n),{render:s=>r?t.exports.jsxDEV(i,o({},s),void 0,!1,{fileName:ge,lineNumber:17,columnNumber:11},void 0):t.exports.jsxDEV(Et,{to:{pathname:"/login"}},void 0,!1,{fileName:ge,lineNumber:19,columnNumber:11},void 0)}),void 0,!1,{fileName:ge,lineNumber:13,columnNumber:5},void 0)};var K="/var/www/edcrm/frontend/src/app/Toast.tsx";function mi(){var s;const[e,i]=x.exports.useState({show:!1,type:"info",list:[],message:"",autoHide:!0});let r=t.exports.jsxDEV(t.exports.Fragment,{},void 0,!1);if((s=e==null?void 0:e.list)==null?void 0:s.length){const l=e.list.map((d,c)=>t.exports.jsxDEV("li",{children:d},c,!1,{fileName:K,lineNumber:29,columnNumber:48},this));r=t.exports.jsxDEV("ul",{children:l},void 0,!1,{fileName:K,lineNumber:30,columnNumber:10},this)}const n=l=>{l.show=!0,i(o(o({},e),l))};x.exports.useEffect(()=>(F.subscribe("TOAST.SHOW",(l,d)=>{n(d)}),()=>{F.unsubscribe("TOAST")}),[]);const a=()=>{i(u(o({},e),{show:!1}))};return t.exports.jsxDEV(Dt,{open:e.show,onClose:a,className:"toast",anchorOrigin:{vertical:"top",horizontal:"center"},TransitionComponent:l=>t.exports.jsxDEV(jt,u(o({},l),{direction:"down"}),void 0,!1,{fileName:K,lineNumber:58,columnNumber:39},this),autoHideDuration:e.autoHide?3e3:null,children:t.exports.jsxDEV(wt,{elevation:6,variant:"filled",severity:e.type,children:[e.message,r]},void 0,!0,{fileName:K,lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:K,lineNumber:53,columnNumber:5},this)}const di=Vt({palette:{mode:"dark"},components:{MuiCssBaseline:{styleOverrides:`
        body, html, #root {
          width: 100%;
          height: 100vh;
          overflow-x:hidden;
        }
      `}},typography:{button:{textTransform:"none"}}});var S="/var/www/edcrm/frontend/src/app/App.tsx";function ci(){const[e,i]=x.exports.useState({loggedIn:!!localStorage.getItem("token"),setLoginStatus:r});function r(n,a){n===!0&&a?(localStorage.setItem("token",a),i(u(o({},e),{loggedIn:!0})),PubSub.publish("TOAST.SHOW",{show:!0,message:"Logged In",type:"info",autoHide:!0})):(localStorage.removeItem("token"),i(u(o({},e),{loggedIn:!1})))}return x.exports.useEffect(()=>{document.title="CRM Demo (Staging)"},[]),t.exports.jsxDEV(Ct,{theme:di,children:[t.exports.jsxDEV(St,{},void 0,!1,{fileName:S,lineNumber:48,columnNumber:7},this),t.exports.jsxDEV(yt,{beta:!0,children:[t.exports.jsxDEV(Kt,{value:e,children:t.exports.jsxDEV(Pt,{children:t.exports.jsxDEV(Tt,{children:[t.exports.jsxDEV(Y,{path:"/login",component:oi},void 0,!1,{fileName:S,lineNumber:53,columnNumber:15},this),t.exports.jsxDEV(Y,{path:"/register",component:li},void 0,!1,{fileName:S,lineNumber:54,columnNumber:15},this),t.exports.jsxDEV(Y,{path:"/forgot-password",component:ni},void 0,!1,{fileName:S,lineNumber:55,columnNumber:15},this),t.exports.jsxDEV(ui,{path:"/",component:Zt,loggedIn:e.loggedIn},void 0,!1,{fileName:S,lineNumber:56,columnNumber:15},this)]},void 0,!0,{fileName:S,lineNumber:52,columnNumber:13},this)},void 0,!1,{fileName:S,lineNumber:51,columnNumber:11},this)},void 0,!1,{fileName:S,lineNumber:50,columnNumber:9},this),t.exports.jsxDEV(mi,{},void 0,!1,{fileName:S,lineNumber:64,columnNumber:9},this)]},void 0,!0,{fileName:S,lineNumber:49,columnNumber:7},this)]},void 0,!0,{fileName:S,lineNumber:47,columnNumber:5},this)}Ft.render(R.createElement(ci),document.getElementById("root"));
